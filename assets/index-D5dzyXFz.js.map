{"version":3,"file":"index-D5dzyXFz.js","sources":["../../src/redux/slices/toastSlice.ts","../../src/redux/slices/cartSlice.ts","../../src/redux/store.ts","../../src/components/Toast.tsx","../../src/components/Layout.tsx","../../src/components/Home.tsx","../../src/pages/Week2.tsx","../../src/pages/Week3.tsx","../../src/components/Login/Login.tsx","../../src/components/Product/ProductModal.tsx","../../src/components/Product/Pagination.tsx","../../src/components/Product/DeleteProductModal.tsx","../../src/components/Product/Product.tsx","../../src/pages/Week4.tsx","../../src/pages/Week5.tsx","../../src/components/Navbar.tsx","../../src/pages/Week6.tsx","../../src/pages/Week7.tsx","../../src/pages/Products.tsx","../../src/pages/ProductDetail.tsx","../../src/pages/Cart.tsx","../../src/pages/Admin.tsx","../../src/RouteConf.tsx","../../src/main.tsx"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface ToastState {\r\n    message: string;\r\n    visible: boolean;\r\n}\r\n\r\nconst initialState: ToastState = {\r\n    message: '',\r\n    visible: false,\r\n};\r\n\r\nconst toastSlice = createSlice({\r\n    name: 'toast',\r\n    initialState,\r\n    reducers: {\r\n        showToast: (state, action: PayloadAction<string>) => {\r\n            state.message = action.payload;\r\n            state.visible = true;\r\n        },\r\n        hideToast: (state) => {\r\n            state.visible = false;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { showToast, hideToast } = toastSlice.actions;\r\nexport default toastSlice.reducer;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface CartItem {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content?: string;\r\n    description?: string;\r\n    price: number;\r\n    origin_price?: number;\r\n    quantity: number;\r\n}\r\n\r\ninterface AddToCartPayload {\r\n    product: {\r\n        id: number | string;\r\n        title: string;\r\n        imageUrl?: string;\r\n        content?: string;\r\n        description?: string;\r\n        price: number;\r\n        origin_price?: number;\r\n    };\r\n    quantity: number;\r\n}\r\n\r\nconst initialState: CartItem[] = [];\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState,\r\n    reducers: {\r\n        addToCart: (state, action: PayloadAction<AddToCartPayload>) => {\r\n            const { product, quantity } = action.payload;\r\n            const existingItem = state.find(item => item.id === product.id);\r\n\r\n            if (existingItem) {\r\n                existingItem.quantity += quantity;\r\n            } else {\r\n                state.push({\r\n                    ...product,\r\n                    imageUrl: product.imageUrl || '',\r\n                    quantity\r\n                });\r\n            }\r\n        },\r\n        removeFromCart: (state, action: PayloadAction<string | number>) => {\r\n            const itemId = action.payload;\r\n            return state.filter(item => item.id !== itemId);\r\n        },\r\n        updateCartItemQuantity: (state, action: PayloadAction<{ id: string | number, quantity: number }>) => {\r\n            const { id, quantity } = action.payload;\r\n            const item = state.find(item => item.id === id);\r\n            if (item) {\r\n                item.quantity = quantity;\r\n            }\r\n        },\r\n        clearCart: () => {\r\n            return initialState;\r\n        }\r\n    }\r\n});\r\n\r\nexport const { addToCart, removeFromCart, updateCartItemQuantity, clearCart } = cartSlice.actions;\r\nexport default cartSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport toastReducer from './slices/toastSlice';\r\nimport cartReducer from './slices/cartSlice';\r\n\r\nconst store = configureStore({\r\n    reducer: {\r\n        toast: toastReducer,\r\n        cart: cartReducer, \r\n    },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../redux/store';\r\nimport { hideToast } from '../redux/slices/toastSlice';\r\n\r\nexport default function Toast() {\r\n  const { message, visible } = useSelector((state: RootState) => state.toast);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      const timer = setTimeout(() => {\r\n        dispatch(hideToast());\r\n      }, 5000); // Hide after 5 seconds\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [visible, dispatch]);\r\n\r\n  if (!visible) return null; // Don't render anything if not visible\r\n\r\n  const isRemoval = message.includes('移除');\r\n  const toastHeaderClassName = isRemoval\r\n    ? \"toast-header bg-danger text-white\"\r\n    : \"toast-header bg-success text-white\";\r\n\r\n  return (\r\n    <div className=\"position-fixed top-0 end-0 p-3\" style={{ zIndex: 1500 }}>\r\n      <div \r\n        className=\"toast show\" \r\n        role=\"alert\" \r\n        aria-live=\"assertive\" \r\n        aria-atomic=\"true\"\r\n        style={{ \r\n          opacity: 1,\r\n          backgroundColor: '#fff',\r\n          boxShadow: '0 0.5rem 1rem rgba(0, 0, 0, 0.15)'\r\n        }}\r\n      >\r\n        <div className={toastHeaderClassName}>\r\n          <strong className=\"me-auto\">通知</strong>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-close\"\r\n            aria-label=\"Close\"\r\n            onClick={() => dispatch(hideToast())}\r\n          ></button>\r\n        </div>\r\n        <div className=\"toast-body\">{message}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// layout page\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Outlet } from 'react-router-dom'\r\nimport Toast from './Toast';\r\n\r\nconst Layout: React.FC = () => {\r\n  return (\r\n    <>\r\n      <div className=\"bg-body-tertiary\">\r\n        <nav className=\"navbar navbar-expand-lg container\">\r\n          <div className=\"container-fluid\">\r\n            <a className=\"navbar-brand fw-bold\" href=\"https://chrisc0210.github.io/react-training-2025/#/\">REACT TRAINING</a>\r\n            <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarText\" aria-controls=\"navbarText\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n              <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div className=\"collapse navbar-collapse\" id=\"navbarText\">\r\n              <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n              {/* <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/react-training-2025/login\">Login</Link>\r\n                </li> */}\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link active' to=\"/\">Home</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"https://chrisc0210.github.io/ReactWeek1/\">Week1</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week2\">Week2</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week3\">Week3</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week4\">Week4</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week5\">Week5</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week6\">Week6</Link>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <Link className='nav-link' to=\"/week7\">Week7</Link>\r\n                </li>\r\n              </ul>\r\n              {/* <span className=\"navbar-text\">\r\n              LOGIN\r\n            </span> */}\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        {/* TITLE */}\r\n        <Toast />\r\n        {/* <main>\r\n        <section>\r\n          <h1>Layout</h1>\r\n        </section>\r\n      </main> */}\r\n      </div>\r\n      <Outlet />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;","import { FC } from 'react'\r\n\r\nconst Home: FC= () => {\r\n    return (\r\n        <div className='container mt-5'>\r\n            <h1>Welcome to the Home Page</h1>\r\n            <p>This is the home page of our application.</p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\n// import reactLogo from './assets/react.svg'\r\n// import viteLogo from '/vite.svg'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\n\r\nfunction Week2() {\r\n  interface Product {\r\n    id: number;\r\n    title: string;\r\n    origin_price: number;\r\n    price: number;\r\n    is_enabled: boolean;\r\n    imageUrl: string;\r\n    category: string;\r\n    description: string;\r\n    content: string;\r\n    imagesUrl: string[];\r\n  }\r\n\r\n  const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n\r\n  // 處理表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value, name } = e.target; //解構賦值\r\n    setAccount({\r\n      ...account,\r\n      [name]: value\r\n    })\r\n    // console.log(account)\r\n  }\r\n  // 登入\r\n  const handleLogin = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault(); // 阻止表單提交\r\n    console.log(account)\r\n    // console.log(import.meta.env.VITE_BASE_URL)\r\n    axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, account)\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        console.log(token, expired) // 顯示 token 和 expired\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n        axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          axios.get(`${import.meta.env.VITE_BASE_URL}/v2/api${import.meta.env.VITE_API_PATH}/admin/products`)\r\n            .then((res: AxiosResponse) => {\r\n              console.log(res.data)\r\n              setProducts(res.data.products);\r\n            })\r\n            .catch((error) => {\r\n              console.error(error);\r\n            });\r\n\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n}\r\n\r\nreturn (\r\n  <>\r\n    {isAuth ? \r\n      <section className=\"container mt-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 col-lg-6 mb-4\">\r\n            <h2 className=\"fw-bold\">產品列表</h2>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>產品名稱</th>\r\n                  <th>原價</th>\r\n                  <th>售價</th>\r\n                  <th>是否啟用</th>\r\n                  <th>查看細節</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {productList.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td className=\"fw-bold\">{item.title}</td>\r\n                    <td>{item.origin_price}</td>\r\n                    <td>{item.price}</td>\r\n                    <td>{item.is_enabled ? \"是\" : \"否\"}</td>\r\n                    <td>\r\n                      <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"col-12 col-lg-6 mb-4\">\r\n            <h2 className=\"fw-bold\">單一產品細節</h2>\r\n            {tempProduct && tempProduct.title ? (\r\n              <div className=\"card mb-3\">\r\n                <img src={tempProduct.imageUrl} className=\"card-img-top primary-image\" alt=\"主圖\" />\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\">\r\n                    {tempProduct.title}\r\n                    <span className=\"badge bg-primary ms-2\">{tempProduct.category}</span>\r\n                  </h5>\r\n                  <p className=\"card-text\">商品描述：{tempProduct.description}</p>\r\n                  <p className=\"card-text\">商品內容：{tempProduct.content}</p>\r\n                  <div className=\"d-flex\">\r\n                    <p className=\"card-text text-secondary\"><del>{tempProduct.origin_price}</del></p>\r\n                    元 / {tempProduct.price} 元\r\n                  </div>\r\n                  <h5 className=\"mt-3\">更多圖片：</h5>\r\n                  <div className=\"d-flex flex-wrap\">\r\n                    {tempProduct.imagesUrl.map((image, index) => (\r\n                      <img key={index} src={image} className=\"img-thumbnail border-0 me-2\" alt=\"其他圖片\" />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-secondary fw-bold\">請選擇一個商品查看 !</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n:\r\n      <section className='bg-gradient'>\r\n        <div className=\"d-flex flex-column justify-content-center align-items-center vh-100\">\r\n          <h1 className=\"mb-5\">請先登入</h1>\r\n          <form className=\"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3\">\r\n            <div className=\"form-floating mb-3\">\r\n              <input type=\"email\" className=\"form-control\" id=\"username\" placeholder=\"name@example.com\"\r\n                value={account.username}\r\n                name='username'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, username: e.target.value })} \r\n              />\r\n              <label htmlFor=\"username\">Email address</label>\r\n            </div>\r\n            <div className=\"form-floating\">\r\n              <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\"\r\n                value={account.password}\r\n                name='password'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, password: e.target.value })} \r\n              />\r\n              <label htmlFor=\"password\">Password</label>\r\n            </div>\r\n            <button className=\"btn btn-primary\" onClick={handleLogin}>登入</button>\r\n          </form>\r\n          <p className=\"mt-5 mb-3 text-muted\">&copy; 2025 Chris Chen</p>\r\n        </div>\r\n      </section>\r\n    }\r\n  </>\r\n)\r\n}\r\n\r\nexport default Week2;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport axios, { AxiosError } from 'axios';\r\n// import reactLogo from './assets/react.svg'\r\n// import viteLogo from '/vite.svg'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport { Modal } from 'bootstrap';\r\n\r\nfunction Week3() {\r\n  interface Product {\r\n    id: number;\r\n    title: string;\r\n    origin_price: number;\r\n    price: number;\r\n    is_enabled: boolean;\r\n    imageUrl: string;\r\n    category: string;\r\n    unit: string;\r\n    description: string;\r\n    content: string;\r\n    imagesUrl: string[];\r\n  }\r\n  interface defaultModalState {\r\n    id?: string;\r\n    imageUrl: string;\r\n    title: string;\r\n    category: string;\r\n    unit: string;\r\n    origin_price: string;\r\n    price: string;\r\n    description: string;\r\n    content: string;\r\n    is_enabled: number | boolean;\r\n    imagesUrl: string[];\r\n  }\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  //定義 Modal 預設值\r\n  const defaultModalState = {\r\n    id: \"\",\r\n    imageUrl: \"\",\r\n    title: \"\",\r\n    category: \"\",\r\n    unit: \"\",\r\n    origin_price: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    content: \"\",\r\n    is_enabled: 0,\r\n    imagesUrl: []\r\n  };\r\n\r\n  // const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [tempProduct, setTempProduct] = useState<defaultModalState>(defaultModalState); // 單一產品細節\r\n  const [modalMode, setModalMode] = useState<'create' | 'edit'>('create'); // modal 模式\r\n\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n\r\n  // 處理表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value, name } = e.target; //解構賦值\r\n    setAccount({\r\n      ...account,\r\n      [name]: value\r\n    })\r\n    // console.log(account)\r\n  }\r\n  // 取得產品列表\r\n  const getProducts = async () => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/products`\r\n      );\r\n      setProducts(res.data.products);\r\n    } catch (error) {\r\n      alert(\"取得產品失敗\");\r\n      console.error(error);\r\n    }\r\n  };\r\n  // 登入\r\n  const handleLogin = async (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault(); // 阻止表單提交\r\n    try {\r\n      const res = await axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, account);\r\n      const { token, expired } = res.data;\r\n      document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n      axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n      if (res.data.success === true) {\r\n        alert('登入成功');\r\n        await getProducts(); // 取得產品列表\r\n        setIsAuth(true);// 登入成功\r\n      }\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError;\r\n      alert(`登入失敗: ${axiosError.message || '請檢查帳號密碼是否正確'}`);\r\n      setIsAuth(false);// 登入失敗\r\n    }\r\n  }\r\n  // 檢查使用者是否登入\r\n  const checkUserLogin = async () => {\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n      // alert(\"使用者已登入\");\r\n      getProducts();\r\n      setIsAuth(true);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\",\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n    checkUserLogin();\r\n  }, []);\r\n\r\n  //產品 modal 設定\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  const delProductModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    new Modal(productModalRef.current!);\r\n    new Modal(delProductModalRef.current!);\r\n    // productModal.show();\r\n  }, []);\r\n  interface OpenProductModalParams {\r\n    mode: 'create' | 'edit';\r\n  }\r\n  // 開啟 Modal\r\n  const openProductModal = (mode: OpenProductModalParams['mode'], product?: Product) => {\r\n    setModalMode(mode);\r\n    if (product) {\r\n      setTempProduct({\r\n        id: product.id.toString(),\r\n        imageUrl: product.imageUrl || \"\",  // 確保 `imageUrl` 存在\r\n        title: product.title,\r\n        category: product.category,\r\n        unit: product.unit,\r\n        origin_price: product.origin_price.toString(),\r\n        price: product.price.toString(),\r\n        description: product.description,\r\n        content: product.content,\r\n        is_enabled: product.is_enabled,\r\n        imagesUrl: product.imagesUrl.length > 0 ? product.imagesUrl : []\r\n      });\r\n    } else {\r\n      setTempProduct(defaultModalState);\r\n    }\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const openDelProductModal = (product: Product) => {\r\n    setTempProduct({\r\n      id: product.id.toString(),\r\n      imageUrl: product.imageUrl,\r\n      title: product.title,\r\n      category: product.category,\r\n      unit: '',\r\n      origin_price: product.origin_price.toString(),\r\n      price: product.price.toString(),\r\n      description: product.description,\r\n      content: product.content,\r\n      is_enabled: product.is_enabled,\r\n      imagesUrl: product.imagesUrl\r\n    });\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const closeProductModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  const closeDelProductModal = () => {\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  // 處理 Modal 表單輸入\r\n  const handleModalInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { value, name, type } = e.target as HTMLInputElement;\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct!,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    })\r\n  );\r\n  }\r\n  // 處理 Modal 其他圖片輸入\r\n  const handleModalImageChange = (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const { value } = e.target;\r\n    setTempProduct((prevProduct) => {\r\n      const newImagesUrl = [...prevProduct.imagesUrl];\r\n      newImagesUrl[index] = value;\r\n      return {\r\n        ...prevProduct,\r\n        imagesUrl: newImagesUrl\r\n      };\r\n    });\r\n  }\r\n  // 新增圖片\r\n  const handleAddImageClick = () => {\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      imagesUrl: [...prevProduct.imagesUrl, \"\"]\r\n    }));\r\n  }\r\n  // 取消圖片\r\n  const handleCancelImageClick = () => {\r\n    // pop 也可以 移除最後一個元素\r\n    // const newImagesUrl = [...tempProduct.imagesUrl];\r\n    // newImagesUrl.pop();\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      // imagesUrl: newImagesUrl //pop \r\n      imagesUrl: prevProduct.imagesUrl.slice(0, prevProduct.imagesUrl.length - 1),\r\n    }));\r\n  }\r\n\r\n  //\r\n  const createProduct = async () => {\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/product`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0\r\n          }\r\n        });\r\n      return { success: true, message: '新增成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `新增失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n  \r\n  const updateProduct = async () => {\r\n    try {\r\n      await axios.put(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0\r\n          }\r\n        });\r\n      return { success: true, message: '更新成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `更新失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n\r\n  const handleUploadProduct = async () => {\r\n    const apiCall = modalMode === 'create' ? createProduct : updateProduct;\r\n    const result = await apiCall();\r\n    \r\n    if (result.success) {\r\n      await getProducts();\r\n      closeProductModal();\r\n    } else {\r\n      alert(result.message);\r\n    }\r\n  }\r\n  \r\n  // 刪除產品\r\n  const delProduct = async () => {\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`);\r\n      return { success: true, message: '刪除成功' };\r\n    } catch (error) {\r\n      const axiosError = error as AxiosError<{message?: string}>;\r\n      const errorMessage = axiosError.response?.data?.message || '發生未知錯誤';\r\n      return { success: false, message: `刪除失敗: ${errorMessage}` };\r\n    }\r\n  }\r\n  \r\n  const handleDelProduct = async () => {\r\n    const result = await delProduct();\r\n    if (result.success) {\r\n      await getProducts();\r\n      closeDelProductModal();\r\n    } else {\r\n      alert(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isAuth ?\r\n        <section className=\"container mt-5\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12 mb-4\">\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <h2 className=\"fw-bold\">產品列表</h2>\r\n                <button onClick={() => { openProductModal('create') }} type=\"button\" className=\"btn btn-primary\"><i className=\"bi  bi-plus-lg\"></i>&nbsp;建立新的產品</button>\r\n              </div>\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>產品名稱</th>\r\n                    <th>原價</th>\r\n                    <th>售價</th>\r\n                    <th>是否啟用</th>\r\n                    <th>查看細節</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {productList.map((item) => (\r\n                    <tr key={item.id}>\r\n                      <td className=\"fw-bold\">{item.title}</td>\r\n                      <td>{item.origin_price}</td>\r\n                      <td>{item.price}</td>\r\n                      <td>{item.is_enabled ?\r\n                        (\r\n                          <span className=\"text-success\">啟用</span>\r\n                        ) : (\r\n                          <span className=\"text-danger\">未啟用</span>\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {/* <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button> */}\r\n                        {/* <div className=\"btn-group\"> */}\r\n                        <div className=\"\">\r\n                          <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openProductModal('edit', product); }} type=\"button\" className=\"btn btn-primary btn-sm me-2\"><i className=\"bi bi-pencil-square\"></i>&nbsp;編輯</button>\r\n                          <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openDelProductModal(product); }} type=\"button\" className=\"btn btn-danger btn-sm\"><i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除</button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        :\r\n        <section className='bg-gradient'>\r\n          <div className=\"d-flex flex-column justify-content-center align-items-center vh-100\">\r\n            <h1 className=\"mb-5\">請先登入</h1>\r\n            <form className=\"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3\">\r\n              <div className=\"form-floating mb-3\">\r\n                <input type=\"email\" className=\"form-control\" id=\"username\" placeholder=\"name@example.com\"\r\n                  value={account.username}\r\n                  name='username'\r\n                  onChange={handleInputChange}\r\n                // onChange={(e) => setAccount({ ...account, username: e.target.value })} \r\n                />\r\n                <label htmlFor=\"username\">Email address</label>\r\n              </div>\r\n              <div className=\"form-floating\">\r\n                <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\"\r\n                  value={account.password}\r\n                  name='password'\r\n                  onChange={handleInputChange}\r\n                // onChange={(e) => setAccount({ ...account, password: e.target.value })} \r\n                />\r\n                <label htmlFor=\"password\">Password</label>\r\n              </div>\r\n              <button className=\"btn btn-primary\" onClick={handleLogin}>登入</button>\r\n            </form>\r\n            <p className=\"mt-5 mb-3 text-muted\">&copy; 2025 Chris Chen</p>\r\n          </div>\r\n        </section>\r\n      }\r\n      {/* 產品 Modal */}\r\n      <div ref={productModalRef} id=\"productModal\" className=\"modal\" style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}>\r\n        <div className=\"modal-dialog modal-dialog-centered modal-xl\">\r\n          <div className=\"modal-content border-0 shadow\">\r\n            <div className=\"modal-header border-bottom\">\r\n              {/* <h5 className=\"modal-title fs-4\">新增產品</h5> */}\r\n              <h5 className=\"modal-title fs-4\">{modalMode === 'create' ? '新增產品' : '編輯產品'}</h5>\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn-close\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div className=\"modal-body p-4\">\r\n              <div className=\"row g-4\">\r\n                <div className=\"col-md-4\">\r\n                  <div className=\"mb-4\">\r\n                    <label htmlFor=\"primary-image\" className=\"form-label\">\r\n                      主要圖片\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        value={tempProduct.imageUrl}\r\n                        onChange={(e) => handleModalInputChange(e as React.ChangeEvent<HTMLInputElement>)}\r\n                        name=\"imageUrl\"\r\n                        type=\"text\"\r\n                        id=\"primary-image\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入圖片連結\"\r\n                      />\r\n                    </div>\r\n                    {tempProduct.imageUrl ? (\r\n                        <img src={tempProduct.imageUrl}  alt={tempProduct.title} className=\"img-fluid\" \r\n                      />\r\n                    ) : (\r\n                      <div className=\"text-muted\">尚無圖片</div>\r\n                    )}\r\n\r\n                  </div>\r\n                  {/* 其他圖片 */}\r\n                  <div className=\"border border-2 border-dashed rounded-3 p-3\">\r\n                    {tempProduct.imagesUrl.map((image: string, index: number) => (\r\n                      <div key={index} className=\"mb-2\">\r\n                        <label\r\n                          htmlFor={`imagesUrl-${index + 1}`}\r\n                          className=\"form-label\"\r\n                        >\r\n                          其他圖片 {index + 1}\r\n                        </label>\r\n                        <input\r\n                          value={image}\r\n                          onChange={(e) => handleModalImageChange(e, index)} // 傳入 index 參數,以便知道是哪一個圖片欄位被更改了\r\n                          id={`imagesUrl-${index + 1}`}\r\n                          type=\"text\"\r\n                          placeholder={`圖片網址 ${index + 1}`}\r\n                          className=\"form-control mb-2\"\r\n                        />\r\n                        {tempProduct.imagesUrl.length > 0 && tempProduct.imagesUrl.some(url => url) ? (\r\n                          tempProduct.imagesUrl.map((image, index) => (\r\n                            image ? <img key={index} src={image} alt={`副圖 ${index + 1}`} className=\"img-fluid\" \r\n                            /> : null\r\n                          ))\r\n                        ) : (\r\n                          <div className=\"text-muted\">無附圖</div>\r\n                        )}\r\n\r\n\r\n                      </div>\r\n                    ))}\r\n                    {/* //新增圖片和取消圖片按鈕 */}\r\n                    <div className=\"btn-group w-100\">\r\n                      {tempProduct.imagesUrl.length < 5 && tempProduct.imagesUrl[tempProduct.imagesUrl.length - 1] !== \"\"\r\n                        && (\r\n                          <button className=\"btn btn-outline-primary btn-sm w-100\" onClick={() => handleAddImageClick()} >新增圖片</button>\r\n                        )\r\n                      }\r\n                      {/* //取消圖片按鈕 */}\r\n                      {tempProduct.imagesUrl.length > 1 && (\r\n                        <button className=\"btn btn-outline-danger btn-sm w-100\" onClick={() => handleCancelImageClick()} >取消圖片</button>\r\n                      )}\r\n                    </div>\r\n                    {/*  */}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-8\">\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"title\" className=\"form-label\">\r\n                      標題{tempProduct.id}\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.title}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"title\"\r\n                      id=\"title\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入標題\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"category\" className=\"form-label\">\r\n                      分類\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.category}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"category\"\r\n                      id=\"category\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入分類\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"unit\" className=\"form-label\">\r\n                      單位\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.unit}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"unit\"\r\n                      id=\"unit\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入單位\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"row g-3 mb-3\">\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"origin_price\" className=\"form-label\">\r\n                        原價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.origin_price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"origin_price\"\r\n                        id=\"origin_price\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入原價\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"price\" className=\"form-label\">\r\n                        售價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"price\"\r\n                        id=\"price\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入售價\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"description\" className=\"form-label\">\r\n                      產品描述\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.description}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"description\"\r\n                      id=\"description\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入產品描述\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"content\" className=\"form-label\">\r\n                      說明內容\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.content}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"content\"\r\n                      id=\"content\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入說明內容\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"form-check\">\r\n                    <input\r\n                      checked={Boolean(tempProduct.is_enabled)}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"is_enabled\"\r\n                      type=\"checkbox\"\r\n                      className=\"form-check-input\"\r\n                      id=\"isEnabled\"\r\n                    />\r\n                    <label className=\"form-check-label\" htmlFor=\"isEnabled\">\r\n                      是否啟用\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer border-top bg-light\">\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn btn-secondary\">\r\n                取消\r\n              </button>\r\n              <button onClick={handleUploadProduct} type=\"button\" className=\"btn btn-primary\">\r\n                確認\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* 刪除產品 Modal */}\r\n      <div\r\n        ref={delProductModalRef}\r\n        id=\"delProductModal\"\r\n        className=\"modal fade\"\r\n        tabIndex={-1}\r\n        style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n      >\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h1 className=\"modal-title fs-5\">刪除產品</h1>\r\n              <button\r\n                onClick={closeDelProductModal}\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              你是否要刪除&nbsp;\r\n              <span className=\"text-danger fw-bold\">{tempProduct.title}?</span>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                onClick={closeDelProductModal}\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n              >\r\n                取消\r\n              </button>\r\n              <button onClick={handleDelProduct} type=\"button\" className=\"btn btn-danger\">\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Week3;\r\n","import React, { useState } from 'react';\r\n// import axios, { AxiosResponse } from 'axios';\r\n\r\ninterface LoginProps {\r\n  handleLogin: (username: string, password: string) => void;\r\n}\r\n\r\nconst Login: React.FC<LoginProps> = ({ handleLogin }) => {\r\n  //定義狀態\r\n  // const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  // 用於管理登入表單的 state\r\n  const [account, setAccount] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n\r\n  //定義 API 網址和路徑\r\n  //  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n\r\n\r\n  // 監聽 input\r\n  // 處理表單輸入\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const {  name, value  } = e.target; //解構賦值\r\n    setAccount((prev) => ({\r\n      // ...account,\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    // console.log(account)\r\n  };\r\n\r\n  // 登入\r\n  // 觸發父層傳入的 handleLogin\r\n  const onSubmitLogin = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();  // 阻止預設行為\r\n    handleLogin(account.username, account.password);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className='bg-gradient'>\r\n        <div className=\"d-flex flex-column justify-content-center align-items-center vh-100\">\r\n          <h1 className=\"mb-5\">請先登入</h1>\r\n          <form className=\"d-flex flex-column gap-4 w-50 p-4 shadow rounded-3\">\r\n            <div className=\"form-floating mb-3\">\r\n              <input type=\"email\" className=\"form-control\" id=\"username\" placeholder=\"name@example.com\"\r\n                value={account.username}\r\n                name='username'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, username: e.target.value })} \r\n              />\r\n              <label htmlFor=\"username\">Email address</label>\r\n            </div>\r\n            <div className=\"form-floating\">\r\n              <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\"\r\n                value={account.password}\r\n                name='password'\r\n                onChange={handleInputChange}\r\n              // onChange={(e) => setAccount({ ...account, password: e.target.value })} \r\n              />\r\n              <label htmlFor=\"password\">Password</label>\r\n            </div>\r\n            <button className=\"btn btn-primary\" onClick={onSubmitLogin}>登入</button>\r\n          </form>\r\n          <p className=\"mt-5 mb-3 text-muted\">&copy; 2025 Chris Chen</p>\r\n        </div>\r\n      </section>\r\n\r\n    </>\r\n  )\r\n};\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { DefaultModalState } from './type';\r\nimport axios from 'axios';\r\n// import { Modal } from 'bootstrap';\r\n\r\n\r\ninterface ProductModalProps {\r\n  tempProduct: DefaultModalState;\r\n  setTempProduct: React.Dispatch<React.SetStateAction<DefaultModalState>>;\r\n  modalMode: 'create' | 'edit';\r\n  closeProductModal: () => void;\r\n  handleUploadProduct: () => void;   // 外層要去呼叫「createProduct 或 updateProduct」的整合函式\r\n  productModalRef: React.RefObject<HTMLDivElement>;\r\n\r\n  BASE_URL: string;\r\n  API_PATH: string;\r\n}\r\n\r\nconst ProductModal: React.FC<ProductModalProps> = ({\r\n  tempProduct,\r\n  setTempProduct,\r\n  modalMode,\r\n  closeProductModal,\r\n  handleUploadProduct,\r\n  productModalRef,\r\n  BASE_URL,\r\n  API_PATH\r\n}) => {\r\n  const [, forceUpdate] = useState(0); // 用於強制更新元件\r\n  // 處理檔案上傳\r\n  const handleFileChange = async (e: React.MouseEvent<HTMLInputElement>) => {\r\n    const fileInput = e.target as HTMLInputElement;\r\n    const file = fileInput.files?.[0];  // 檢查是否有選取檔案\r\n    if (!file) {\r\n      alert(\"請選擇圖片檔案\");\r\n      return;\r\n    }\r\n    // if (!file) return;\r\n    const formData = new FormData();\r\n    formData.append('file-to-upload', file);\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/upload`, formData\r\n        ,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data', // 確保 Content-Type 正確\r\n          }\r\n        }\r\n      );\r\n      // API 回傳的圖片 URL\r\n      // console.log(res.data);\r\n      const uploadImageUrl = res.data.imageUrl;\r\n      // console.log(\"uploadImageUrl\", uploadImageUrl);\r\n      setTempProduct((prevProduct) => ({\r\n        ...prevProduct,\r\n        imageUrl: uploadImageUrl\r\n      }));\r\n      forceUpdate((n: number) => n + 1); // 強制畫面更新\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('圖片上傳失敗');\r\n    }\r\n  }\r\n  // 處理 Modal 表單輸入\r\n  const handleModalInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { value, name, type } = e.target as HTMLInputElement;\r\n    const checked = (e.target as HTMLInputElement).checked;\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct!,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    })\r\n    );\r\n  }\r\n  // 處理 Modal 其他圖片輸入\r\n  const handleModalImageChange = (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const { value } = e.target;\r\n    setTempProduct((prevProduct) => {\r\n      const newImagesUrl = [...prevProduct.imagesUrl];\r\n      newImagesUrl[index] = value;\r\n      return {\r\n        ...prevProduct,\r\n        imagesUrl: newImagesUrl\r\n      };\r\n    });\r\n  }\r\n  // 新增圖片\r\n  const handleAddImageClick = () => {\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      imagesUrl: [...prevProduct.imagesUrl, \"\"]\r\n    }));\r\n  }\r\n  // 取消圖片\r\n  // 刪除圖片欄位最後一筆資料\r\n  const handleCancelImageClick = () => {\r\n    // pop 也可以 移除最後一個元素\r\n    // const newImagesUrl = [...tempProduct.imagesUrl];\r\n    // newImagesUrl.pop();\r\n    setTempProduct((prevProduct) => ({\r\n      ...prevProduct,\r\n      // imagesUrl: newImagesUrl //pop \r\n      imagesUrl: prevProduct.imagesUrl.slice(0, prevProduct.imagesUrl.length - 1),\r\n    }));\r\n  }\r\n  //\r\n  const handleAdditionalFileChange = async (e: React.ChangeEvent<HTMLInputElement>, index: number) => {\r\n    const fileInput = e.target;\r\n    const file = fileInput.files?.[0];\r\n\r\n    if (!file) {\r\n      alert(\"請選擇圖片檔案\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file-to-upload\", file);\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/upload`,\r\n        formData,\r\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n      );\r\n\r\n      console.log(`副圖片上傳成功: ${res.data.imageUrl}`);\r\n\r\n      setTempProduct((prev) => {\r\n        const newImagesUrl = [...prev.imagesUrl];\r\n        newImagesUrl[index] = res.data.imageUrl; // 更新對應的 index\r\n        return { ...prev, imagesUrl: newImagesUrl };\r\n      });\r\n    } catch (error) {\r\n      console.error(\"副圖片上傳失敗:\", error);\r\n      alert(\"副圖片上傳失敗\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div ref={productModalRef} id=\"productModal\" className=\"modal\" style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}>\r\n        <div className=\"modal-dialog modal-dialog-centered modal-xl\">\r\n          <div className=\"modal-content border-0 shadow\">\r\n            <div className=\"modal-header border-bottom\">\r\n              {/* <h5 className=\"modal-title fs-4\">新增產品</h5> */}\r\n              <h5 className=\"modal-title fs-4\">{modalMode === 'create' ? '新增產品' : '編輯產品'}</h5>\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn-close\" aria-label=\"Close\"></button>\r\n            </div>\r\n\r\n            <div className=\"modal-body p-4\">\r\n              <div className=\"row g-4\">\r\n                <div className=\"col-md-4\">\r\n                  {/*  */}\r\n                  <div className=\"mb-5\">\r\n                    <label htmlFor=\"fileInput\" className=\"form-label\"> 圖片上傳 </label>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\".jpg,.jpeg,.png\"\r\n                      className=\"form-control\"\r\n                      id=\"fileInput\"\r\n                      onClick={handleFileChange}\r\n                    />\r\n                  </div>\r\n                  <div className=\"mb-4\">\r\n                    <label htmlFor=\"primary-image\" className=\"form-label\">\r\n                      主要圖片\r\n                    </label>\r\n                    <div className=\"input-group\">\r\n                      <input\r\n                        value={tempProduct.imageUrl}\r\n                        onChange={(e) => handleModalInputChange(e as React.ChangeEvent<HTMLInputElement>)}\r\n                        name=\"imageUrl\"\r\n                        type=\"text\"\r\n                        id=\"primary-image\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入圖片連結\"\r\n                      />\r\n                    </div>\r\n                    {tempProduct.imageUrl ? (\r\n                      <img src={tempProduct.imageUrl} alt={tempProduct.title} className=\"img-fluid\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"text-muted\">尚無圖片</div>\r\n                    )}\r\n\r\n                  </div>\r\n                  {/* 其他圖片 */}\r\n                  <div className=\"border border-2 border-dashed rounded-3 p-3\">\r\n                    {tempProduct.imagesUrl.map((image: string, index: number) => (\r\n                      <div key={index} className=\"mb-2\">\r\n                        <label\r\n                          htmlFor={`imagesUrl-${index + 1}`}\r\n                          className=\"form-label\"\r\n                        >\r\n                          其他圖片 {index + 1}\r\n                        </label>\r\n                        {/* 圖片上傳 input */}\r\n                        <input\r\n                          type=\"file\"\r\n                          accept=\".jpg,.jpeg,.png\"\r\n                          className=\"form-control mb-2\"\r\n                          id={`fileInput-${index}`}\r\n                          onChange={(e) => handleAdditionalFileChange(e, index)}\r\n                        />\r\n\r\n                        {/* 手動輸入圖片 URL */}\r\n                        <input\r\n                          value={image}\r\n                          onChange={(e) => handleModalImageChange(e, index)} // 傳入 index 參數,以便知道是哪一個圖片欄位被更改了\r\n                          id={`imagesUrl-${index + 1}`}\r\n                          type=\"text\"\r\n                          placeholder={`圖片網址 ${index + 1}`}\r\n                          className=\"form-control mb-2\"\r\n                        />\r\n                        {/* 預覽圖片 */}\r\n                        {image ? (\r\n                          <img src={image} alt={`副圖 ${index + 1}`} className=\"img-fluid\" />\r\n                        ) : (\r\n                          <div className=\"text-muted\">尚無圖片</div>\r\n                        )}\r\n\r\n\r\n                      </div>\r\n                    ))}\r\n                    {/* //新增圖片和取消圖片按鈕 */}\r\n                    <div className=\"btn-group w-100\">\r\n                      {tempProduct.imagesUrl.length < 5 && tempProduct.imagesUrl[tempProduct.imagesUrl.length - 1] !== \"\"\r\n                        && (\r\n                          <button className=\"btn btn-outline-primary btn-sm w-100\" onClick={() => handleAddImageClick()} >新增圖片</button>\r\n                        )\r\n                      }\r\n                      {/* //取消圖片按鈕 */}\r\n                      {tempProduct.imagesUrl.length > 1 && (\r\n                        <button className=\"btn btn-outline-danger btn-sm w-100\" onClick={() => handleCancelImageClick()} >取消圖片</button>\r\n                      )}\r\n                    </div>\r\n                    {/*  */}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-md-8\">\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"title\" className=\"form-label\">\r\n                      標題{tempProduct.id}\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.title}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"title\"\r\n                      id=\"title\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入標題\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"category\" className=\"form-label\">\r\n                      分類\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.category}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"category\"\r\n                      id=\"category\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入分類\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"unit\" className=\"form-label\">\r\n                      單位\r\n                    </label>\r\n                    <input\r\n                      value={tempProduct.unit}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"unit\"\r\n                      id=\"unit\"\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      placeholder=\"請輸入單位\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"row g-3 mb-3\">\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"origin_price\" className=\"form-label\">\r\n                        原價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.origin_price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"origin_price\"\r\n                        id=\"origin_price\"\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入原價\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <label htmlFor=\"price\" className=\"form-label\">\r\n                        售價\r\n                      </label>\r\n                      <input\r\n                        value={tempProduct.price}\r\n                        onChange={handleModalInputChange}\r\n                        name=\"price\"\r\n                        id=\"price\"\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"請輸入售價\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"description\" className=\"form-label\">\r\n                      產品描述\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.description}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"description\"\r\n                      id=\"description\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入產品描述\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"mb-3\">\r\n                    <label htmlFor=\"content\" className=\"form-label\">\r\n                      說明內容\r\n                    </label>\r\n                    <textarea\r\n                      value={tempProduct.content}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"content\"\r\n                      id=\"content\"\r\n                      className=\"form-control\"\r\n                      rows={4}\r\n                      placeholder=\"請輸入說明內容\"\r\n                    ></textarea>\r\n                  </div>\r\n\r\n                  <div className=\"form-check\">\r\n                    <input\r\n                      checked={Boolean(tempProduct.is_enabled)}\r\n                      onChange={handleModalInputChange}\r\n                      name=\"is_enabled\"\r\n                      type=\"checkbox\"\r\n                      className=\"form-check-input\"\r\n                      id=\"isEnabled\"\r\n                    />\r\n                    <label className=\"form-check-label\" htmlFor=\"isEnabled\">\r\n                      是否啟用\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {/* LV3 */}\r\n              <div className=\"col-md-12\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"rating\" className=\"form-label\">商品評價星級 (1~5)</label>\r\n                  <input\r\n                    value={tempProduct.rating ?? 0}\r\n                    onChange={(e) => setTempProduct((prev) => ({ ...prev, rating: Number(e.target.value) }))}\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"5\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入評價星級\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"stock\" className=\"form-label\">庫存數量</label>\r\n                  <input\r\n                    value={tempProduct.stock ?? 0}\r\n                    onChange={(e) => setTempProduct((prev) => ({ ...prev, stock: Number(e.target.value) }))}\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入庫存數量\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              {/*  */}\r\n            </div>\r\n            {/*  */}\r\n            <div className=\"modal-footer border-top bg-light\">\r\n              <button onClick={closeProductModal} type=\"button\" className=\"btn btn-secondary\">\r\n                取消\r\n              </button>\r\n              <button onClick={handleUploadProduct} type=\"button\" className=\"btn btn-primary\">\r\n                確認\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProductModal","import React from \"react\";\r\n\r\ninterface PageInfo {\r\n  total_pages: number;\r\n  current_page: number;\r\n  has_pre?: boolean;\r\n  has_next?: boolean;\r\n}\r\n\r\ninterface PaginationProps {\r\n  pageInfo: PageInfo;\r\n  handlePageChange: (page: number) => void;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = ({ pageInfo, handlePageChange }) => {\r\n  const { total_pages, current_page, has_pre, has_next } = pageInfo;\r\n\r\n  return (\r\n    <nav>\r\n      <ul className=\"pagination\">\r\n        {/* 上一頁 */}\r\n        <li className={`page-item ${!has_pre ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_pre && handlePageChange(current_page - 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_pre}\r\n          >\r\n            上一頁\r\n          </button>\r\n        </li>\r\n\r\n        {/* 頁碼 */}\r\n        {Array.from({ length: total_pages }, (_, index) => (\r\n          <li key={index} className={`page-item ${current_page === index + 1 ? \"active\" : \"\"}`}>\r\n            <button\r\n              onClick={() => handlePageChange(index + 1)}\r\n              className=\"page-link\"\r\n            >\r\n              {index + 1}\r\n            </button>\r\n          </li>\r\n        ))}\r\n\r\n        {/* 下一頁 */}\r\n        <li className={`page-item ${!has_next ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            onClick={() => has_next && handlePageChange(current_page + 1)}\r\n            className=\"page-link\"\r\n            disabled={!has_next}\r\n          >\r\n            下一頁\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\n// import { DefaultModalState } from './type';\r\n// import axios from 'axios';\r\n// import { Modal } from 'bootstrap';\r\n\r\n\r\ninterface DeleteProductModalProps {\r\n\ttempProduct: DefaultModalState;\r\n\tcloseDelProductModal: () => void;\r\n\thandleDelProduct: () => void;\r\n\tdelProductModalRef: React.RefObject<HTMLDivElement>;\r\n}\r\n\r\nexport interface DefaultModalState {\r\n  id?: string;\r\n  imageUrl: string;\r\n  title: string;\r\n  category: string;\r\n  unit: string;\r\n  origin_price: string;\r\n  price: string;\r\n  description: string;\r\n  content: string;\r\n  is_enabled: number | boolean;\r\n  imagesUrl: string[];\r\n}\r\n\r\n//定義 Modal 預設值\r\n// const defaultModalState = {\r\n// \tid: \"\",\r\n// \timageUrl: \"\",\r\n// \ttitle: \"\",\r\n// \tcategory: \"\",\r\n// \tunit: \"\",\r\n// \torigin_price: \"\",\r\n// \tprice: \"\",\r\n// \tdescription: \"\",\r\n// \tcontent: \"\",\r\n// \tis_enabled: 0,\r\n// \timagesUrl: []\r\n// };\r\n\r\nconst DeleteProductModal: React.FC<DeleteProductModalProps> = ({\r\n\ttempProduct,\r\n\tcloseDelProductModal,\r\n\thandleDelProduct,\r\n\tdelProductModalRef\r\n}) => {\r\n\r\n\t//定義 Modal 預設值\r\n\t// const defaultModalState = {\r\n\t// id: \"\",\r\n\t// imageUrl: \"\",\r\n\t// title: \"\",\r\n\t// category: \"\",\r\n\t// unit: \"\",\r\n\t// origin_price: \"\",\r\n\t// price: \"\",\r\n\t// description: \"\",\r\n\t// content: \"\",\r\n\t// is_enabled: 0,\r\n\t// imagesUrl: []\r\n\t// };\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* 刪除產品 Modal */}\r\n\t\t\t<div\r\n\t\t\t\tref={delProductModalRef}\r\n\t\t\t\tid=\"delProductModal\"\r\n\t\t\t\tclassName=\"modal fade\"\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tstyle={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t<h1 className=\"modal-title fs-5\">刪除產品</h1>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeDelProductModal}\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn-close\"\r\n\t\t\t\t\t\t\t\tdata-bs-dismiss=\"modal\"\r\n\t\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t你是否要刪除&nbsp;\r\n\t\t\t\t\t\t\t<span className=\"text-danger fw-bold\">{tempProduct.title}?</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeDelProductModal}\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button onClick={handleDelProduct} type=\"button\" className=\"btn btn-danger\">\r\n\t\t\t\t\t\t\t\t刪除\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default DeleteProductModal;","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Modal } from 'bootstrap';\r\n\r\n//元件\r\nimport type { Product, DefaultModalState, PageInfo } from './type';\r\nimport ProductModal from './ProductModal';\r\nimport Pagination from './Pagination';\r\nimport DeleteProductModal from './DeleteProductModal';\r\n// import Toast from '../Toast';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showToast } from '../../redux/slices/toastSlice';\r\n\r\ninterface ProductProps {\r\n  isAuth: boolean;\r\n  token?: string;\r\n}\r\nconst Product: React.FC<ProductProps> = ({  token }) => {\r\n    // 添加 dispatch\r\n    const dispatch = useDispatch();\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  //定義 Modal 預設值\r\n  const defaultModalState = {\r\n    id: \"\",\r\n    imageUrl: \"\",\r\n    title: \"\",\r\n    category: \"\",\r\n    unit: \"\",\r\n    origin_price: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    content: \"\",\r\n    is_enabled: 0,\r\n    imagesUrl: [], // 確保初始為空陣列\r\n  };\r\n\r\n  // 狀態\r\n  const [productList, setProducts] = React.useState<Product[]>([]); // 產品列表\r\n  // const [tempProduct, setTempProduct] = React.useState<Product | null>(null); // 單一產品細節\r\n  const [tempProduct, setTempProduct] = useState<DefaultModalState>(defaultModalState); // 單一產品細節\r\n  const [modalMode, setModalMode] = useState<'create' | 'edit'>('create'); // modal 模式\r\n  const [pageInfo, setPageInfo] = useState<PageInfo>({ total_pages: 0, current_page: 1 }); // 頁面資訊\r\n\r\n  //產品 modal 設定 Ref\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  const delProductModalRef = useRef<HTMLDivElement>(null);\r\n\r\n// 在所有 axios 請求中添加 token\r\nuseEffect(() => {\r\n  if (token) {\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n  }\r\n}, [token]);\r\n\r\n  // 取得產品列表\r\n  const getProducts = useCallback(async (page = 1) => {\r\n    try {\r\n      const res = await axios.get(\r\n        `${BASE_URL}/v2/api${API_PATH}/admin/products?page=${page}`,\r\n        { \r\n          headers: { Authorization: token },\r\n          withCredentials: true \r\n        }\r\n      );\r\n      setProducts(res.data.products); // 設定產品列表\r\n      setPageInfo(res.data.pagination);// 設定分頁資訊\r\n      dispatch(showToast('取得產品列表成功'));\r\n    } catch (error) {\r\n      alert(\"取得產品失敗\");\r\n      console.error(error);\r\n    }\r\n  }, [BASE_URL, API_PATH, token, dispatch]);\r\n  //取得產品列表\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, [getProducts]);\r\n\r\n  // 處理表單輸入\r\n  // const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n  //   const { value, name } = e.target; //解構賦值\r\n  //   setAccount({\r\n  //     ...account,\r\n  //     [name]: value\r\n  //   })\r\n  //   // console.log(account)\r\n  // }\r\n\r\n\r\n  //產品 modal 設定\r\n  useEffect(() => {\r\n    new Modal(productModalRef.current!);\r\n    new Modal(delProductModalRef.current!);\r\n    // productModal.show();\r\n  }, []);\r\n  interface OpenProductModalParams {\r\n    mode: 'create' | 'edit';\r\n  }\r\n  // 開啟「新增/編輯」產品 Modal\r\n  const openProductModal = (mode: OpenProductModalParams['mode'], product?: Product) => {\r\n    setModalMode(mode);\r\n    if (product) {\r\n      setTempProduct({\r\n        id: product.id.toString(),\r\n        imageUrl: product.imageUrl || \"\",  // 確保 `imageUrl` 存在\r\n        title: product.title,\r\n        category: product.category,\r\n        unit: product.unit,\r\n        origin_price: product.origin_price.toString(),\r\n        price: product.price.toString(),\r\n        description: product.description,\r\n        content: product.content,\r\n        is_enabled: product.is_enabled,\r\n        imagesUrl: product.imagesUrl\r\n        // imagesUrl: product.imagesUrl.length > 0 ? product.imagesUrl : []\r\n      });\r\n    } else {\r\n      setTempProduct(defaultModalState);\r\n    }\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  // 開啟刪除 Modal\r\n  const openDelProductModal = (product: Product) => {\r\n    setTempProduct({\r\n      id: product.id.toString(),\r\n      imageUrl: product.imageUrl,\r\n      title: product.title,\r\n      category: product.category,\r\n      unit: '',\r\n      origin_price: product.origin_price.toString(),\r\n      price: product.price.toString(),\r\n      description: product.description,\r\n      content: product.content,\r\n      is_enabled: product.is_enabled,\r\n      imagesUrl: product.imagesUrl\r\n    });\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  }\r\n  const closeProductModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n  const closeDelProductModal = () => {\r\n    const modalInstance = Modal.getInstance(delProductModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n    setTempProduct(defaultModalState);\r\n  }\r\n\r\n  // 新增產品\r\n  const createProduct = async () => {\r\n    try {\r\n      const res = await axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/product`,\r\n        // tempProduct\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            // imagesUrl: tempProduct.imagesUrl,\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 是陣列\r\n            rating: tempProduct.rating ?? 0,\r\n            stock: tempProduct.stock ?? 0,\r\n          }\r\n        });\r\n      console.log(res.data);\r\n      // alert('新增成功');\r\n      // getProducts();\r\n      // closeProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('新增失敗');\r\n    }\r\n  }\r\n\r\n  // 更新產品\r\n  const updateProduct = async () => {\r\n    try {\r\n      const res = await axios.put(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            // imagesUrl: tempProduct.imagesUrl\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 存在\r\n            rating: tempProduct.rating ?? 0,\r\n            stock: tempProduct.stock ?? 0,\r\n          }\r\n        });\r\n      console.log(res.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('更新失敗');\r\n    }\r\n  }\r\n\r\n  // 用於 ProductModal 按下「確認」後，依 mode 呼叫 create 或 update\r\n  const handleUploadProduct = async () => {\r\n    const apiCall = modalMode === 'create' ? createProduct : updateProduct;\r\n\r\n    try {\r\n      // await createProduct();\r\n      await apiCall();\r\n      // alert('新增成功');\r\n      getProducts();\r\n      closeProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('新增失敗');\r\n    }\r\n  }\r\n  // 刪除產品\r\n  const delProduct = async () => {\r\n    try {\r\n      const res = await axios.delete(`${BASE_URL}/v2/api${API_PATH}/admin/product/${tempProduct.id}`,\r\n        {\r\n          data: {\r\n            ...tempProduct,\r\n            origin_price: Number(tempProduct.origin_price),\r\n            price: Number(tempProduct.price),\r\n            is_enabled: tempProduct.is_enabled ? 1 : 0,\r\n            imagesUrl: Array.isArray(tempProduct.imagesUrl) ? tempProduct.imagesUrl : [], // 確保 imagesUrl 存在\r\n          }\r\n        });\r\n      console.log(res.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('刪除失敗');\r\n    }\r\n  }\r\n\r\n  // 刪除確認\r\n  const handleDelProduct = async () => {\r\n    try {\r\n      // await createProduct();\r\n      await delProduct();\r\n      // alert('新增成功');\r\n      getProducts();\r\n      closeDelProductModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('刪除產品失敗');\r\n    }\r\n  }\r\n  //頁面設定\r\n  // interface PageInfo {\r\n  //   total_pages: number;\r\n  //   current_page: number;\r\n  //   has_pre?: boolean;\r\n  //   has_next?: boolean;\r\n  //   category?: string;\r\n  // }\r\n  // const [pageInfo, setPageInfo] = useState<PageInfo>({ total_pages: 0, current_page: 1 }); // 頁面資訊\r\n  // 分頁\r\n  const handlePageChange = (page: number) => {\r\n    getProducts(page);\r\n    // setPageInfo((prevPageInfo) => ({\r\n    //   ...prevPageInfo,\r\n    //   current_page: page\r\n    // }));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section className=\"container mt-5\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12 mb-4\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h2 className=\"fw-bold\">產品列表</h2>\r\n              <button onClick={() => { openProductModal('create') }} type=\"button\" className=\"btn btn-primary\"><i className=\"bi bi-plus-lg\"></i>&nbsp;建立新的產品</button>\r\n            </div>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>產品名稱</th>\r\n                  <th>原價</th>\r\n                  <th>售價</th>\r\n                  <th>是否啟用</th>\r\n                  <th>查看細節</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {productList.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td className=\"fw-bold\">{item.title}</td>\r\n                    <td>{item.origin_price}</td>\r\n                    <td>{item.price}</td>\r\n                    <td>{item.is_enabled ?\r\n                      (\r\n                        <span className=\"text-success\">啟用</span>\r\n                      ) : (\r\n                        <span className=\"text-danger\">未啟用</span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {/* <button className=\"btn btn-primary\" onClick={() => { setTempProduct(item) }}>查看細節</button> */}\r\n                      {/* <div className=\"btn-group\"> */}\r\n                      <div className=\"\">\r\n                        <button\r\n                          onClick={() => openProductModal('edit', item)}\r\n                          type=\"button\"\r\n                          className=\"btn btn-primary btn-sm me-2\"\r\n                        >\r\n                          <i className=\"bi bi-pencil-square\"></i>&nbsp;編輯\r\n                        </button>\r\n                        <button\r\n                          onClick={() => openDelProductModal(item)}\r\n                          type=\"button\"\r\n                          className=\"btn btn-danger btn-sm\"\r\n                        >\r\n                          <i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除\r\n                        </button>\r\n                        {/* <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openProductModal('edit', product); }} type=\"button\" className=\"btn btn-primary btn-sm me-2\"><i className=\"bi bi-pencil-square\"></i>&nbsp;編輯</button> */}\r\n                        {/* <button onClick={() => { const product = productList.find(product => product.id === item.id); if (product) openDelProductModal(product); }} type=\"button\" className=\"btn btn-danger btn-sm\"><i className=\"bi bi-trash3-fill\"></i>&nbsp;刪除</button> */}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-center\">\r\n          {/* 頁面 UI */}\r\n          <Pagination pageInfo={pageInfo} handlePageChange={handlePageChange} />\r\n        </div>\r\n      </section>\r\n      {/* 產品 Modal */}\r\n      <ProductModal\r\n        tempProduct={tempProduct}\r\n        setTempProduct={setTempProduct}\r\n        modalMode={modalMode}\r\n        closeProductModal={closeProductModal}\r\n        handleUploadProduct={handleUploadProduct}\r\n        productModalRef={productModalRef}\r\n        BASE_URL={BASE_URL}\r\n        API_PATH={API_PATH}\r\n      />\r\n      {/* 刪除產品 Modal */}\r\n      <DeleteProductModal\r\n        tempProduct={tempProduct}\r\n        closeDelProductModal={closeDelProductModal}\r\n        handleDelProduct={handleDelProduct}\r\n        delProductModalRef={delProductModalRef}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Product;","import  { useEffect, useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport Login from '../components/Login/Login';\r\nimport Product from '../components/Product/Product';\r\n\r\nfunction Week4() {\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  // const [account, setAccount] = useState({\r\n  //   username: '',\r\n  //   password: ''\r\n  // })\r\n  \r\n    useEffect(() => {\r\n      const checkUserLogin = async () => {\r\n        try {\r\n          await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n          // alert(\"使用者已登入\");\r\n          // getProducts();\r\n          setIsAuth(true);\r\n        } catch (error) {\r\n          console.error(error);\r\n          setIsAuth(false);\r\n        }\r\n      };\r\n      const token = document.cookie.replace(\r\n        /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n        \"$1\",\r\n      );\r\n      axios.defaults.headers.common['Authorization'] = token;\r\n      checkUserLogin();\r\n    }, []);\r\n    \r\n  // 登入\r\n  const handleLogin = (username: string, password: string) => {\r\n    // console.log({ username, password })\r\n    axios.post(`${BASE_URL}/v2/api${API_PATH}/admin/signin`, { username, password })\r\n    // axios.post(`${import.meta.env.VITE_BASE_URL}/v2/admin/signin`, { username, password })\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        // console.log(token, expired) // 顯示 token 和 expired\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}`; // 設定 cookie\r\n        axios.defaults.headers.common['Authorization'] = token; // 設定預設請求標頭\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          // getProducts(); // 取得產品列表\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n  }\r\n  return (\r\n    <>\r\n      {isAuth ? (\r\n        // 如果已登入，顯示產品頁面\r\n        <Product isAuth={isAuth} />\r\n      ) : (\r\n        // 尚未登入就顯示登入畫面\r\n        <Login handleLogin={handleLogin} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Week4;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week5() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState({\r\n    id: \"\",\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  interface CartItem extends Product {\r\n    quantity: number;\r\n  }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct({\r\n      id: String(product.id), // 將 product.id 轉換為字串\r\n      title: product.title,\r\n      imageUrl: product.imageUrl,\r\n      content: product.content,\r\n      description: product.description,\r\n      price: product.price,\r\n      origin_price: product.origin_price,\r\n    });\r\n    openModal();\r\n  };\r\n\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id\r\n              ? { ...item, quantity: item.quantity + 1 }\r\n              : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      alert('已加入購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      setCart([]);\r\n      alert('訂單已送出並清空購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {loading && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100vw',\r\n            height: '100vh',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n          }}\r\n        >\r\n          <ReactLoading type=\"spin\" color=\"#000\" />\r\n        </div>\r\n      )}\r\n      <div className=\"mt-4\">\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th>圖片</th>\r\n              <th>商品名稱</th>\r\n              <th>價格</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.map((product) => (\r\n              <tr key={product.id}>\r\n                <td style={{ width: \"200px\" }}>\r\n                  <img\r\n                    className=\"img-fluid\"\r\n                    src={product.imageUrl}\r\n                    alt={product.title}\r\n                  />\r\n                </td>\r\n                <td>{product.title}</td>\r\n                <td>\r\n                  <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                  <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"btn-group btn-group-sm\">\r\n                    <button\r\n                      onClick={() => handleSeeMore(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-secondary\"\r\n                    >\r\n                      查看更多\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleAddToCart(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger\"\r\n                    >\r\n                      加到購物車\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div\r\n          ref={productModalRef}\r\n          style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n          className=\"modal fade\"\r\n          id=\"productModal\"\r\n          tabIndex={-1}\r\n        >\r\n          <div className=\"modal-dialog modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h2 className=\"modal-title fs-5\">\r\n                  產品名稱：{tempProduct.title}\r\n                </h2>\r\n                <button\r\n                  onClick={closeModal}\r\n                  type=\"button\"\r\n                  className=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                ></button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <img\r\n                  src={tempProduct.imageUrl}\r\n                  alt={tempProduct.title}\r\n                  className=\"img-fluid\"\r\n                />\r\n                <p>內容：{tempProduct.content}</p>\r\n                <p>描述：{tempProduct.description}</p>\r\n                <p>\r\n                  價錢：{tempProduct.price}{\" \"}\r\n                  <del>{tempProduct.origin_price}</del> 元\r\n                </p>\r\n                <div className=\"input-group align-items-center\">\r\n                  <label htmlFor=\"qtySelect\">數量：</label>\r\n                  <select\r\n                    value={qtySelect}\r\n                    onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                    id=\"qtySelect\"\r\n                    className=\"form-select\"\r\n                  >\r\n                    {Array.from({ length: 10 }).map((_, index) => (\r\n                      <option key={index} value={index + 1}>\r\n                        {index + 1}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => tempProduct.id && handleAddToCart(tempProduct)} // 確保有 `id`\r\n                  disabled={!tempProduct.id} // 如果 `id` 不存在則禁用按鈕\r\n                >\r\n                  加入購物車\r\n                </button>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-end py-3\">\r\n          <button\r\n            className=\"btn btn-outline-danger\"\r\n            type=\"button\"\r\n            onClick={() => setCart([])}\r\n          >\r\n            清空購物車\r\n          </button>\r\n        </div>\r\n\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>品名</th>\r\n              <th style={{ width: \"150px\" }}>數量/單位</th>\r\n              <th className=\"text-end\">單價</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {cart.map((item) => (\r\n              <tr key={item.id}>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-danger btn-sm\"\r\n                    onClick={() =>\r\n                      setCart((prev) =>\r\n                        prev.filter((cartItem) => cartItem.id !== item.id)\r\n                      )\r\n                    }\r\n                  >\r\n                    x\r\n                  </button>\r\n                </td>\r\n                <td>{item.title}</td>\r\n                <td style={{ width: \"150px\" }}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <div className=\"btn-group me-2\" role=\"group\">\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={() =>\r\n                          setCart((prev) =>\r\n                            prev.map((cartItem) =>\r\n                              cartItem.id === item.id && cartItem.quantity > 1\r\n                                ? { ...cartItem, quantity: cartItem.quantity - 1 }\r\n                                : cartItem\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <span\r\n                        className=\"btn border border-dark\"\r\n                        style={{ width: \"50px\", cursor: \"auto\" }}\r\n                      >\r\n                        {item.quantity}\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-dark btn-sm\"\r\n                        onClick={() =>\r\n                          setCart((prev) =>\r\n                            prev.map((cartItem) =>\r\n                              cartItem.id === item.id\r\n                                ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n                                : cartItem\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                    <span className=\"input-group-text bg-transparent border-0\">\r\n                      unit\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td className=\"text-end\">{item.price * item.quantity}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colSpan={3} className=\"text-end\">\r\n                總計：\r\n              </td>\r\n              <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"my-5 row justify-content-center\">\r\n        <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">\r\n              Email\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入 Email\"\r\n              {...register('email', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"name\" className=\"form-label\">\r\n              收件人姓名\r\n            </label>\r\n            <input\r\n              id=\"name\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入姓名\"\r\n              {...register('name', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"tel\" className=\"form-label\">\r\n              收件人電話\r\n            </label>\r\n            <input\r\n              id=\"tel\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入電話\"\r\n              {...register('tel', { required: '必填',\r\n                pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                }\r\n              })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"address\" className=\"form-label\">\r\n              收件人地址\r\n            </label>\r\n            <input\r\n              id=\"address\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"請輸入地址\"\r\n              {...register('address', { required: '必填' })}\r\n            />\r\n            <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"message\" className=\"form-label\">\r\n              留言\r\n            </label>\r\n            <textarea\r\n              id=\"message\"\r\n              className=\"form-control\"\r\n              cols={30}\r\n              rows={10}\r\n              {...register('message')}\r\n            ></textarea>\r\n          </div>\r\n          <div className=\"text-end\">\r\n            <button type=\"submit\" className=\"btn btn-danger\">\r\n              送出訂單\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Week5;\r\n","import { Link, NavLink } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n// 添加 props 接口\r\ninterface NavbarProps {\r\n  isAuth?: boolean;\r\n  onLogout?: () => void;\r\n}\r\n\r\nconst Navbar: React.FC<NavbarProps> = ({ isAuth, onLogout }) => {\r\n  // 登出功能\r\n  const handleLogout = async () => {\r\n    try {\r\n      const BASE_URL = import.meta.env.VITE_BASE_URL;\r\n      await axios.post(`${BASE_URL}/v2/logout`, {}, { withCredentials: true });\r\n\r\n      // 清除 cookie\r\n      document.cookie = \"hexToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n      // 清除 axios 默認請求頭\r\n      axios.defaults.headers.common['Authorization'] = '';\r\n\r\n      // 呼叫父組件的 onLogout 函數\r\n      if (onLogout) onLogout();\r\n\r\n      alert('登出成功');\r\n    } catch (error) {\r\n      console.error('登出失敗', error);\r\n      alert('登出失敗');\r\n    }\r\n  };\r\n  return (\r\n    <nav className=\"container navbar navbar-expand-lg navbar-dark bg-dark\">\r\n      <div className=\"container-fluid\">\r\n        <Link className=\"navbar-brand\" to=\"/\">\r\n          CART\r\n        </Link>\r\n        <button\r\n          className=\"navbar-toggler\"\r\n          type=\"button\"\r\n          data-bs-toggle=\"collapse\"\r\n          data-bs-target=\"#navbarNav\"\r\n          aria-controls=\"navbarNav\"\r\n          aria-expanded=\"false\"\r\n          aria-label=\"Toggle navigation\"\r\n        >\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n          <ul className=\"navbar-nav\">\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive ? \"nav-link active\" : \"nav-link\"\r\n                }\r\n                to=\"/\"\r\n              >\r\n                首頁\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive ? \"nav-link active\" : \"nav-link\"\r\n                }\r\n                to=\"/products\"\r\n              >\r\n                產品頁\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive ? \"nav-link active\" : \"nav-link\"\r\n                }\r\n                to=\"/cart\"\r\n              >\r\n                購物車\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink\r\n                className={({ isActive }) =>\r\n                  isActive ? \"nav-link active\" : \"nav-link\"\r\n                }\r\n                to=\"/Admin\"\r\n              >\r\n                後台登入\r\n              </NavLink>\r\n            </li>\r\n            {/* 登出 */}\r\n            {/* 條件渲染登出按鈕 */}\r\n            {isAuth && (\r\n              <li className=\"nav-item\">\r\n                <button className=\"nav-link btn btn-link\" onClick={handleLogout}>\r\n                  登出\r\n                </button>\r\n              </li>\r\n            )}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    </nav >\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\nimport Navbar from '../components/Navbar';\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week6() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState({\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  interface CartItem extends Product {\r\n    quantity: number;\r\n  }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct(product);\r\n    openModal();\r\n  };\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id\r\n              ? { ...item, quantity: item.quantity + 1 }\r\n              : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      alert('已加入購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      setCart([]);\r\n      alert('訂單已送出並清空購物車');\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <>\r\n      <Navbar /> {/* Add this line */}\r\n      <div className=\"container\">\r\n        {loading && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100vw',\r\n              height: '100vh',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n            }}\r\n          >\r\n            <ReactLoading type=\"spin\" color=\"#000\" />\r\n          </div>\r\n        )}\r\n        <div className=\"mt-4\">\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th>圖片</th>\r\n                <th>商品名稱</th>\r\n                <th>價格</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product.id}>\r\n                  <td style={{ width: \"200px\" }}>\r\n                    <img\r\n                      className=\"img-fluid\"\r\n                      src={product.imageUrl}\r\n                      alt={product.title}\r\n                    />\r\n                  </td>\r\n                  <td>{product.title}</td>\r\n                  <td>\r\n                    <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                    <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"btn-group btn-group-sm\">\r\n                      <button\r\n                        onClick={() => handleSeeMore(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                      >\r\n                        查看更多\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleAddToCart(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger\"\r\n                      >\r\n                        加到購物車\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div\r\n            ref={productModalRef}\r\n            style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n            className=\"modal fade\"\r\n            id=\"productModal\"\r\n            tabIndex={-1}\r\n          >\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header\">\r\n                  <h2 className=\"modal-title fs-5\">\r\n                    產品名稱：{tempProduct.title}\r\n                  </h2>\r\n                  <button\r\n                    onClick={closeModal}\r\n                    type=\"button\"\r\n                    className=\"btn-close\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  ></button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                  <img\r\n                    src={tempProduct.imageUrl}\r\n                    alt={tempProduct.title}\r\n                    className=\"img-fluid\"\r\n                  />\r\n                  <p>內容：{tempProduct.content}</p>\r\n                  <p>描述：{tempProduct.description}</p>\r\n                  <p>\r\n                    價錢：{tempProduct.price}{\" \"}\r\n                    <del>{tempProduct.origin_price}</del> 元\r\n                  </p>\r\n                  <div className=\"input-group align-items-center\">\r\n                    <label htmlFor=\"qtySelect\">數量：</label>\r\n                    <select\r\n                      value={qtySelect}\r\n                      onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                      id=\"qtySelect\"\r\n                      className=\"form-select\"\r\n                    >\r\n                      {Array.from({ length: 10 }).map((_, index) => (\r\n                        <option key={index} value={index + 1}>\r\n                          {index + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                  <button type=\"button\" className=\"btn btn-primary\">\r\n                    加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-end py-3\">\r\n            <button\r\n              className=\"btn btn-outline-danger\"\r\n              type=\"button\"\r\n              onClick={() => setCart([])}\r\n            >\r\n              清空購物車\r\n            </button>\r\n          </div>\r\n\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>品名</th>\r\n                <th style={{ width: \"150px\" }}>數量/單位</th>\r\n                <th className=\"text-end\">單價</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger btn-sm\"\r\n                      onClick={() =>\r\n                        setCart((prev) =>\r\n                          prev.filter((cartItem) => cartItem.id !== item.id)\r\n                        )\r\n                      }\r\n                    >\r\n                      x\r\n                    </button>\r\n                  </td>\r\n                  <td>{item.title}</td>\r\n                  <td style={{ width: \"150px\" }}>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div className=\"btn-group me-2\" role=\"group\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            setCart((prev) =>\r\n                              prev.map((cartItem) =>\r\n                                cartItem.id === item.id && cartItem.quantity > 1\r\n                                  ? { ...cartItem, quantity: cartItem.quantity - 1 }\r\n                                  : cartItem\r\n                              )\r\n                            )\r\n                          }\r\n                        >\r\n                          -\r\n                        </button>\r\n                        <span\r\n                          className=\"btn border border-dark\"\r\n                          style={{ width: \"50px\", cursor: \"auto\" }}\r\n                        >\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            setCart((prev) =>\r\n                              prev.map((cartItem) =>\r\n                                cartItem.id === item.id\r\n                                  ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n                                  : cartItem\r\n                              )\r\n                            )\r\n                          }\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                      <span className=\"input-group-text bg-transparent border-0\">\r\n                        unit\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan={3} className=\"text-end\">\r\n                  總計：\r\n                </td>\r\n                <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                  {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"my-5 row justify-content-center\">\r\n          <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入 Email\"\r\n                {...register('email', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"name\" className=\"form-label\">\r\n                收件人姓名\r\n              </label>\r\n              <input\r\n                id=\"name\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入姓名\"\r\n                {...register('name', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"tel\" className=\"form-label\">\r\n                收件人電話\r\n              </label>\r\n              <input\r\n                id=\"tel\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入電話\"\r\n                {...register('tel', { required: '必填',      pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                } })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"address\" className=\"form-label\">\r\n                收件人地址\r\n              </label>\r\n              <input\r\n                id=\"address\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入地址\"\r\n                {...register('address', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"message\" className=\"form-label\">\r\n                留言\r\n              </label>\r\n              <textarea\r\n                id=\"message\"\r\n                className=\"form-control\"\r\n                cols={30}\r\n                rows={10}\r\n                {...register('message')}\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"text-end\">\r\n              <button type=\"submit\" className=\"btn btn-danger\">\r\n                送出訂單\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Week6;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal } from \"bootstrap\";\r\nimport { useForm } from 'react-hook-form';\r\nimport ReactLoading from 'react-loading';\r\nimport Navbar from '../components/Navbar';\r\nimport Toast from '../components/Toast'; // Add this line\r\nimport { useDispatch, useSelector } from 'react-redux'; // Add this line\r\nimport { showToast } from '../redux/slices/toastSlice'; // Add this line\r\nimport { addToCart, clearCart } from '../redux/slices/cartSlice'; // Add this line\r\nimport { RootState } from '../redux/store'; // Add this line\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\nfunction Week6() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [tempProduct, setTempProduct] = useState<Product>({\r\n    id: \"\",\r\n    title: \"\",\r\n    imageUrl: \"\",\r\n    content: \"\",\r\n    description: \"\",\r\n    price: 0,\r\n    origin_price: 0,\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<IFormInputs>();\r\n\r\n  const dispatch = useDispatch(); // Add this line\r\n\r\n  const cart = useSelector((state: RootState) => state.cart); // Use Redux cart\r\n\r\n  useEffect(() => {\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\"\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n\r\n    const getProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getProducts();\r\n  }, []);\r\n\r\n  const productModalRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (productModalRef.current) {\r\n      new Modal(productModalRef.current, { backdrop: false });\r\n    }\r\n  }, []);\r\n\r\n  const openModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.show();\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    const modalInstance = Modal.getInstance(productModalRef.current!);\r\n    if (modalInstance) {\r\n      modalInstance.hide();\r\n    }\r\n  };\r\n\r\n  interface Product {\r\n    id: number | string;\r\n    title: string;\r\n    imageUrl: string;\r\n    content: string;\r\n    description: string;\r\n    price: number;\r\n    origin_price: number;\r\n  }\r\n\r\n  //   interface CartItem extends Product {\r\n  //     quantity: number;\r\n  //   }\r\n\r\n  const handleSeeMore = (product: Product) => {\r\n    setTempProduct(product);\r\n    openModal();\r\n  };\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n      dispatch(addToCart({\r\n        product,\r\n        quantity: 1\r\n      }));\r\n      dispatch(showToast('已加入購物車')); // Add this line\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddToCartFromModal = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: tempProduct.id,\r\n          qty: qtySelect\r\n        }\r\n      });\r\n      dispatch(addToCart({\r\n        product: tempProduct,\r\n        quantity: qtySelect\r\n      }));\r\n      dispatch(showToast(`已加入 ${qtySelect} 個 ${tempProduct.title} 至購物車`));\r\n      closeModal();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('加入購物車失敗');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  interface IFormInputs {\r\n    email: string;\r\n    name: string;\r\n    tel: string;\r\n    address: string;\r\n    message?: string;\r\n  }\r\n\r\n  const onSubmit = async (data: IFormInputs) => {\r\n    if (cart.length === 0) {\r\n      alert('購物車無產品，無法結帳');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address\r\n          },\r\n          message: data.message\r\n        }\r\n      });\r\n      dispatch(clearCart());\r\n      dispatch(showToast('訂單已送出並清空購物車')); // Add this line\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('訂單發送失敗');\r\n    }\r\n  };\r\n\r\n  const [qtySelect, setQtySelect] = useState(1);\r\n\r\n  return (\r\n    <>\r\n      <Navbar /> \r\n      <Toast /> \r\n      <div className=\"container\">\r\n        {loading && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100vw',\r\n              height: '100vh',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              backgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n            }}\r\n          >\r\n            <ReactLoading type=\"spin\" color=\"#000\" />\r\n          </div>\r\n        )}\r\n        <div className=\"mt-4\">\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th>圖片</th>\r\n                <th>商品名稱</th>\r\n                <th>價格</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product.id}>\r\n                  <td style={{ width: \"200px\" }}>\r\n                    <img\r\n                      className=\"img-fluid\"\r\n                      src={product.imageUrl}\r\n                      alt={product.title}\r\n                    />\r\n                  </td>\r\n                  <td>{product.title}</td>\r\n                  <td>\r\n                    <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                    <div className=\"h5\">特價 {product.origin_price}元</div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"btn-group btn-group-sm\">\r\n                      <button\r\n                        onClick={() => handleSeeMore(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                      >\r\n                        查看更多\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleAddToCart(product)}\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger\"\r\n                      >\r\n                        加到購物車\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div\r\n            ref={productModalRef}\r\n            style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n            className=\"modal fade\"\r\n            id=\"productModal\"\r\n            tabIndex={-1}\r\n          >\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n              <div className=\"modal-content\">\r\n                <div className=\"modal-header\">\r\n                  <h2 className=\"modal-title fs-5\">\r\n                    產品名稱：{tempProduct.title}\r\n                  </h2>\r\n                  <button\r\n                    onClick={closeModal}\r\n                    type=\"button\"\r\n                    className=\"btn-close\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  ></button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                  <img\r\n                    src={tempProduct.imageUrl}\r\n                    alt={tempProduct.title}\r\n                    className=\"img-fluid\"\r\n                  />\r\n                  <p>內容：{tempProduct.content}</p>\r\n                  <p>描述：{tempProduct.description}</p>\r\n                  <p>\r\n                    價錢：{tempProduct.price}{\" \"}\r\n                    <del>{tempProduct.origin_price}</del> 元\r\n                  </p>\r\n                  <div className=\"input-group align-items-center\">\r\n                    <label htmlFor=\"qtySelect\">數量：</label>\r\n                    <select\r\n                      value={qtySelect}\r\n                      onChange={(e) => setQtySelect(Number(e.target.value))}\r\n                      id=\"qtySelect\"\r\n                      className=\"form-select\"\r\n                    >\r\n                      {Array.from({ length: 10 }).map((_, index) => (\r\n                        <option key={index} value={index + 1}>\r\n                          {index + 1}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"btn btn-primary\"\r\n                    onClick={handleAddToCartFromModal}\r\n                  >\r\n                    加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-end py-3\">\r\n            <button\r\n              className=\"btn btn-outline-danger\"\r\n              type=\"button\"\r\n              onClick={() => dispatch(clearCart())}\r\n            >\r\n              清空購物車\r\n            </button>\r\n          </div>\r\n\r\n          <table className=\"table align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>品名</th>\r\n                <th style={{ width: \"150px\" }}>數量/單位</th>\r\n                <th className=\"text-end\">單價</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {cart.map((item) => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger btn-sm\"\r\n                      onClick={() =>\r\n                        dispatch(clearCart())\r\n                      }\r\n                    >\r\n                      x\r\n                    </button>\r\n                  </td>\r\n                  <td>{item.title}</td>\r\n                  <td style={{ width: \"150px\" }}>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div className=\"btn-group me-2\" role=\"group\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            dispatch(addToCart({\r\n                              product: item,\r\n                              quantity: item.quantity - 1\r\n                            }))\r\n                          }\r\n                        >\r\n                          -\r\n                        </button>\r\n                        <span\r\n                          className=\"btn border border-dark\"\r\n                          style={{ width: \"50px\", cursor: \"auto\" }}\r\n                        >\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-dark btn-sm\"\r\n                          onClick={() =>\r\n                            dispatch(addToCart({\r\n                              product: item,\r\n                              quantity: item.quantity + 1\r\n                            }))\r\n                          }\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                      <span className=\"input-group-text bg-transparent border-0\">\r\n                        unit\r\n                      </span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colSpan={3} className=\"text-end\">\r\n                  總計：\r\n                </td>\r\n                <td className=\"text-end\" style={{ width: \"130px\" }}>\r\n                  {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"my-5 row justify-content-center\">\r\n          <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入 Email\"\r\n                {...register('email', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"name\" className=\"form-label\">\r\n                收件人姓名\r\n              </label>\r\n              <input\r\n                id=\"name\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入姓名\"\r\n                {...register('name', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"tel\" className=\"form-label\">\r\n                收件人電話\r\n              </label>\r\n              <input\r\n                id=\"tel\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入電話\"\r\n                {...register('tel', { required: '必填',      pattern: {\r\n                  value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                  message: '請輸入正確的電話格式'\r\n                } })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"address\" className=\"form-label\">\r\n                收件人地址\r\n              </label>\r\n              <input\r\n                id=\"address\"\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"請輸入地址\"\r\n                {...register('address', { required: '必填' })}\r\n              />\r\n              <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"message\" className=\"form-label\">\r\n                留言\r\n              </label>\r\n              <textarea\r\n                id=\"message\"\r\n                className=\"form-control\"\r\n                cols={30}\r\n                rows={10}\r\n                {...register('message')}\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"text-end\">\r\n              <button type=\"submit\" className=\"btn btn-danger\">\r\n                送出訂單\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Week6;\r\n","import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ReactLoading from \"react-loading\";\r\nimport Navbar from '../components/Navbar';\r\nimport Toast from '../components/Toast';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showToast } from '../redux/slices/toastSlice';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface Product {\r\n  id: number | string;\r\n  title: string;\r\n  imageUrl: string;\r\n  price: number;\r\n  origin_price: number;\r\n}\r\n\r\ninterface CartItem {\r\n  id: number | string;\r\n  title: string;\r\n  price: number;\r\n  quantity: number;\r\n}\r\n\r\ninterface ProductsProps {\r\n  cart: CartItem[];\r\n  setCart: React.Dispatch<React.SetStateAction<CartItem[]>>;\r\n}\r\n\r\nconst Products: React.FC<ProductsProps> = ({ cart, setCart }) => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/products`);\r\n        setProducts(res.data.products);\r\n      } catch (error) {\r\n        alert(\"取得產品失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const handleAddToCart = async (product: Product) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: { product_id: product.id, qty: 1 },\r\n      });\r\n      setCart((prev) => {\r\n        const found = prev.find((item) => item.id === product.id);\r\n        if (found) {\r\n          return prev.map((item) =>\r\n            item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item\r\n          );\r\n        }\r\n        return [...prev, { ...product, quantity: 1 }];\r\n      });\r\n      dispatch(showToast('已加入購物車'));\r\n      // dispatch(showToast(`已加入 ${qtySelect} 個 ${tempProduct.title} 至購物車`));\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"加入購物車失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteFromCart = async (cartItemId: string | number) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${cartItemId}`);\r\n      setCart((prev) => prev.filter((item) => item.id !== cartItemId));\r\n      dispatch(showToast('已從購物車移除產品'));\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"從購物車移除產品失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <Toast />\r\n      <div className=\"container mt-4\">\r\n        {loading && <ReactLoading type=\"spin\" color=\"#000\" className=\"d-block mx-auto\" />}\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1>產品列表</h1>\r\n          <Link to=\"/cart\" className=\"btn btn-primary mt-3\">查看購物車</Link>\r\n        </div>\r\n        <table className=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th>圖片</th>\r\n              <th>商品名稱</th>\r\n              <th>價格</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.map((product) => (\r\n              <tr key={product.id}>\r\n                <td style={{ width: \"200px\" }}>\r\n                  <img className=\"img-fluid\" src={product.imageUrl} alt={product.title} />\r\n                </td>\r\n                <td>{product.title}</td>\r\n                <td>\r\n                  <del className=\"h6\">原價 {product.origin_price} 元</del>\r\n                  <div className=\"h5\">特價 {product.price} 元</div>\r\n                </td>\r\n                <td>\r\n                  <div className=\"btn-group btn-group-sm\">\r\n                    <Link to={`/products/${product.id}`} className=\"btn btn-outline-secondary\">\r\n                      查看更多\r\n                    </Link>\r\n                    <button\r\n                      onClick={() => handleAddToCart(product)}\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger\"\r\n                    >\r\n                      加到購物車\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {cart.length > 0 && (\r\n          <div className=\"mt-5\">\r\n            <h2>購物車</h2>\r\n            <table className=\"table align-middle\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>品名</th>\r\n                  <th>數量</th>\r\n                  <th className=\"text-end\">單價</th>\r\n                  <th className=\"text-end\">小計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {cart.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-outline-danger btn-sm\"\r\n                        onClick={() => handleDeleteFromCart(item.id)}\r\n                      >\r\n                        x\r\n                      </button>\r\n                    </td>\r\n                    <td>{item.title}</td>\r\n                    <td>{item.quantity}</td>\r\n                    <td className=\"text-end\">{item.price}</td>\r\n                    <td className=\"text-end\">{item.price * item.quantity}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan={4} className=\"text-end\">總計：</td>\r\n                  <td className=\"text-end\">\r\n                    {cart.reduce((acc, item) => acc + item.price * item.quantity, 0)}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n            <div className=\"text-end\">\r\n              <button \r\n                className=\"btn btn-danger\" \r\n                onClick={() => {\r\n                  // Clear the entire cart\r\n                  setCart([]);\r\n                  dispatch(showToast('購物車已清空'));\r\n                }}\r\n              >\r\n                清空購物車\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ReactLoading from \"react-loading\";\r\nimport Navbar from '../components/Navbar';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { showToast } from \"../redux/slices/toastSlice\";\r\nimport { addToCart } from \"../redux/slices/cartSlice\";\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface Product {\r\n  id: number | string;\r\n  title: string;\r\n  imageUrl: string;\r\n  content: string;\r\n  description: string;\r\n  price: number;\r\n  origin_price: number;\r\n}\r\n\r\nconst ProductDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${BASE_URL}/v2/api${API_PATH}/product/${id}`);\r\n        setProduct(res.data.product);\r\n      } catch (error) {\r\n        alert(\"取得產品詳情失敗\");\r\n        console.error(error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!product) return;\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: product.id,\r\n          qty: 1\r\n        }\r\n      });\r\n\r\n      dispatch(addToCart({\r\n        product: {\r\n          id: product.id,\r\n          title: product.title,\r\n          imageUrl: product.imageUrl,\r\n          price: product.price,\r\n          origin_price: product.origin_price,\r\n        },\r\n        quantity: 1\r\n      }));\r\n      dispatch(showToast(\"已加入購物車\"));\r\n    } catch (error) {\r\n      console.error(\"加入購物車失敗\", error);\r\n      alert(\"加入購物車失敗\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n        <ReactLoading type=\"spin\" color=\"#000\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return <h1 className=\"text-center mt-5\">找不到產品</h1>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"container mt-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1>產品詳細頁</h1>\r\n          <button\r\n          className=\"btn btn-danger\"\r\n          onClick={handleAddToCart}\r\n        >\r\n          加到購物車\r\n        </button>\r\n        </div>\r\n        <img src={product.imageUrl} alt={product.title} className=\"img-fluid mb-3\" />\r\n        <h2>{product.title}</h2>\r\n        <p>{product.content}</p>\r\n        <p>{product.description}</p>\r\n        <p>\r\n          價格：{product.price} 元 <del>{product.origin_price} 元</del>\r\n        </p>\r\n        <button className=\"btn btn-outline-primary\" onClick={() => navigate(\"/products\")}>\r\n            返回產品列表\r\n          </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n","import { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Navbar from '../components/Navbar';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { clearCart, removeFromCart, updateCartItemQuantity } from '../redux/slices/cartSlice';\r\nimport { showToast } from '../redux/slices/toastSlice';\r\nimport { RootState } from '../redux/store';\r\nimport Toast from '../components/Toast';\r\n\r\nconst BASE_URL = import.meta.env.VITE_BASE_URL;\r\nconst API_PATH = import.meta.env.VITE_API_PATH;\r\n\r\ninterface OrderForm {\r\n  email: string;\r\n  name: string;\r\n  tel: string;\r\n  address: string;\r\n  message?: string;\r\n}\r\n\r\n\r\nconst Cart = () => {\r\n  const { register, handleSubmit, formState: { errors } } = useForm<OrderForm>();\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const cart = useSelector((state: RootState) => state.cart);\r\n  const dispatch = useDispatch();\r\n\r\n  const totalAmount = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);\r\n\r\n  const onSubmit = async (data: OrderForm) => {\r\n    if (cart.length === 0) {\r\n      dispatch(showToast(\"購物車是空的，無法送出訂單！\"));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/order`, {\r\n        data: {\r\n          user: {\r\n            name: data.name,\r\n            email: data.email,\r\n            tel: data.tel,\r\n            address: data.address,\r\n          },\r\n          message: data.message,\r\n          products: cart.map((item) => ({\r\n            product_id: item.id,\r\n            qty: item.quantity,\r\n          })),\r\n        },\r\n      });\r\n\r\n      // dispatch(showToast(\"訂單。送出成功！\"));\r\n      alert(\"訂單送出成功！\");\r\n      dispatch(clearCart());\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"訂單送出失敗\", error);\r\n      // dispatch(showToast(\"訂單送出失敗，請稍後再試！\"));\r\n      alert(\"訂單送出失敗，請稍後再試！\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (itemId: string | number) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${itemId}`);\r\n      dispatch(removeFromCart(itemId));\r\n      dispatch(showToast('已從購物車移除商品'));\r\n    } catch (error) {\r\n      console.error('刪除購物車商品失敗', error);\r\n      dispatch(showToast('刪除購物車商品失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveOne = async (item: { id: string | number; title: string; quantity: number; price: number; }) => {\r\n    setLoading(true);\r\n    try {\r\n      if (item.quantity > 1) {\r\n        const newQty = item.quantity - 1;\r\n        await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n          data: {\r\n            product_id: item.id,\r\n            qty: newQty\r\n          }\r\n        });\r\n        dispatch(updateCartItemQuantity({ id: item.id, quantity: newQty }));\r\n        dispatch(showToast(`已減少 1 個 ${item.title}`));\r\n      } else {\r\n        // If only 1 left, remove the item entirely\r\n        await axios.delete(`${BASE_URL}/v2/api${API_PATH}/cart/${item.id}`);\r\n        dispatch(removeFromCart(item.id));\r\n        dispatch(showToast(`已從購物車移除 ${item.title}`));\r\n      }\r\n    } catch (error) {\r\n      console.error('更新購物車失敗', error);\r\n      dispatch(showToast('更新購物車失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddOne = async (item: { id: string | number; title: string; quantity: number; price: number; }) => {\r\n    setLoading(true);\r\n    try {\r\n      const newQty = item.quantity + 1;\r\n      await axios.post(`${BASE_URL}/v2/api${API_PATH}/cart`, {\r\n        data: {\r\n          product_id: item.id,\r\n          qty: newQty\r\n        }\r\n      });\r\n      dispatch(updateCartItemQuantity({ id: item.id, quantity: newQty }));\r\n      dispatch(showToast(`已增加 1 個 ${item.title}`));\r\n    } catch (error) {\r\n      console.error('更新購物車失敗', error);\r\n      dispatch(showToast('更新購物車失敗，請稍後再試'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <Toast />\r\n      <div className=\"container mt-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h1>購物車</h1>\r\n          <Link to=\"/products\" className=\"btn btn-outline-primary mt-3\">\r\n            返回產品列表\r\n          </Link>\r\n        </div>\r\n        {cart.length === 0 ? (\r\n          <div className=\"text-center mt-5\">\r\n            <div className=\"text-danger col-12\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"80px\" height=\"80px\" viewBox=\"0 0 22 22\" id=\"memory-cart\"><path d=\"M19 14V16H6V15H5V11H4V8H3V3H1V1H5V4H21V8H20V11H19V12H7V14H19M5 7H6V10H18V7H19V6H5V7M7 17H9V18H10V20H9V21H7V20H6V18H7V17M15 17H17V18H18V20H17V21H15V20H14V18H15V17Z\" /></svg>\r\n            </div>\r\n            <h2 className=\"text-muted mt-3\">您的購物車是空的</h2>\r\n            <p className=\"text-muted\">趕快去選購您喜愛的商品吧！</p>\r\n            <Link to=\"/products\" className=\"btn btn-primary mt-3\">\r\n              返回產品列表\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>品名</th>\r\n                  <th>數量</th>\r\n                  <th>單價</th>\r\n                  <th>總價</th>\r\n                  <th>操作</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {cart.map((item) => (\r\n                  <tr key={item.id}>\r\n                    <td>{item.title}</td>\r\n                    <td>\r\n                      <button \r\n                        className=\"btn btn-outline-secondary btn-sm me-2\"\r\n                        onClick={() => handleRemoveOne(item)}\r\n                      >\r\n                        -\r\n                      </button>\r\n                      {item.quantity}\r\n                      <button\r\n                        className=\"btn btn-outline-secondary btn-sm ms-2\"\r\n                        onClick={() => handleAddOne(item)}\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </td>\r\n                    <td>{item.price} 元</td>\r\n                    <td>{item.price * item.quantity} 元</td>\r\n                    <td>\r\n                      <button \r\n                        className=\"btn btn-outline-danger btn-sm\"\r\n                        onClick={() => handleDeleteItem(item.id)}\r\n                      >\r\n                        移除\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colSpan={3} className=\"text-end fw-bold\">總計：</td>\r\n                  <td className=\"fw-bold\">{totalAmount} 元</td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n\r\n            <div className=\"my-5 row justify-content-center\">\r\n              <form className=\"col-md-6\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n                  <input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入 Email\"\r\n                    {...register(\"email\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.email?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">收件人姓名</label>\r\n                  <input\r\n                    id=\"name\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入姓名\"\r\n                    {...register(\"name\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.name?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"tel\" className=\"form-label\">收件人電話</label>\r\n                  <input\r\n                    id=\"tel\"\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入電話\"\r\n                    {...register(\"tel\", { required: \"必填\",      \r\n                      pattern: {\r\n                      value: /^(0[2-8]\\d{7}|09\\d{8})$/,\r\n                      message: '請輸入正確的電話格式'\r\n                    } })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.tel?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"address\" className=\"form-label\">收件人地址</label>\r\n                  <input\r\n                    id=\"address\"\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"請輸入地址\"\r\n                    {...register(\"address\", { required: \"必填\" })}\r\n                  />\r\n                  <p className=\"text-danger my-2\">{errors.address?.message}</p>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"message\" className=\"form-label\">留言</label>\r\n                  <textarea\r\n                    id=\"message\"\r\n                    className=\"form-control\"\r\n                    cols={30}\r\n                    rows={3}\r\n                    {...register(\"message\")}\r\n                  ></textarea>\r\n                </div>\r\n\r\n                <div className=\"text-center\">\r\n                  <button type=\"submit\" className=\"btn btn-danger\" disabled={loading}>\r\n                    {loading ? \"送出中...\" : \"送出訂單\"}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-outline-secondary ms-2\"\r\n                    onClick={() => {\r\n                      dispatch(clearCart());\r\n                      window.location.reload();\r\n                    }}\r\n                  >\r\n                    清空購物車\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import { useEffect, useState } from 'react';\r\nimport axios, { AxiosResponse } from 'axios';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'; // 引入 bootstrap\r\n// import '@/styles/all.scss'; // 引入自訂的 scss 檔案\r\nimport Login from '../components/Login/Login';\r\nimport Product from '../components/Product/Product';\r\nimport Navbar from '../components/Navbar';\r\nimport Toast from '../components/Toast';\r\n\r\n// 在頂部添加全局配置\r\naxios.defaults.withCredentials = true;\r\n\r\nfunction Admin() {\r\n  //定義 API 網址和路徑\r\n  const BASE_URL = import.meta.env.VITE_BASE_URL; // 從 .env 取得 API 網址\r\n  // const API_PATH = import.meta.env.VITE_API_PATH; // 從 .env 取得 API 路徑\r\n\r\n  const [isAuth, setIsAuth] = useState(false); // 是否登入\r\n  // const [account, setAccount] = useState({\r\n  //   username: '',\r\n  //   password: ''\r\n  // })\r\n\r\n  useEffect(() => {\r\n    const checkUserLogin = async () => {\r\n      try {\r\n        await axios.post(`${BASE_URL}/v2/api/user/check`);\r\n        // alert(\"使用者已登入\");\r\n        // getProducts();\r\n        setIsAuth(true);\r\n      } catch (error) {\r\n        console.error(error);\r\n        setIsAuth(false);\r\n      }\r\n    };\r\n    const token = document.cookie.replace(\r\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\r\n      \"$1\",\r\n    );\r\n    axios.defaults.headers.common['Authorization'] = token;\r\n    checkUserLogin();\r\n  }, [BASE_URL]);\r\n\r\n  // 登入\r\n  const handleLogin = (username: string, password: string) => {\r\n    // console.log({ username, password })\r\n    // Update to use the BASE_URL constant\r\n    axios.post(`${BASE_URL}/v2/admin/signin`, { username, password })\r\n      .then((res: AxiosResponse) => {\r\n        const { token, expired } = res.data; //解構賦值\r\n        // console.log(token, expired) // 顯示 token 和 expired\r\n        // 添加 SameSite 和 Secure 屬性\r\n        // 設定 cookie\r\n        document.cookie = `hexToken=${token}; expires=${new Date(expired)}; path=/; SameSite=None; Secure`;\r\n        axios.defaults.headers.common['Authorization'] = token;\r\n\r\n        if (res.data.success === true) {\r\n          alert('登入成功');\r\n          // window.location.href = '/';\r\n          // getProducts(); // 取得產品列表\r\n          setIsAuth(true);// 登入成功\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        alert('登入失敗');\r\n        setIsAuth(false);// 登入失敗\r\n\r\n      });\r\n  }\r\n  return (\r\n    <>\r\n    <Navbar \r\n      isAuth={isAuth} \r\n      onLogout={() => setIsAuth(false)} \r\n    />\r\n      <Toast />\r\n      {isAuth ? (\r\n        // 如果已登入，顯示產品頁面\r\n        // 傳遞 token 給產品頁面\r\n        <Product isAuth={isAuth} token={axios.defaults.headers.common['Authorization'] as string || undefined} />\r\n      ) : (\r\n        // 尚未登入就顯示登入畫面\r\n        <Login handleLogin={handleLogin} />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Admin;\r\n","import { HashRouter, Routes, Route } from \"react-router-dom\";\r\n\r\n// Components\r\nimport Layout from \"./components/Layout\";\r\nimport Home from \"./components/Home\";\r\n// Pages\r\nimport Week2 from \"./pages/Week2\";\r\nimport Week3 from \"./pages/Week3\";\r\nimport Week4 from \"./pages/Week4\";\r\nimport Week5 from \"./pages/Week5\";\r\nimport Week6 from \"./pages/Week6\";\r\nimport Week7 from \"./pages/Week7\";\r\nimport Products from \"./pages/Products\";\r\nimport ProductDetail from \"./pages/ProductDetail\";\r\nimport Cart from \"./pages/Cart\";\r\nimport Admin from \"./pages/Admin\";\r\n\r\nconst RouteConf = () => {\r\n  // Get the base URL from the environment\r\n  // const basename = import.meta.env.BASE_URL;\r\n\r\n  return (\r\n    // <BrowserRouter basename={basename}>\r\n    <HashRouter>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Layout />}>\r\n          <Route index element={<Home />} />\r\n          <Route path=\"week2\" element={<Week2 />} />\r\n          <Route path=\"week3\" element={<Week3 />} />\r\n          <Route path=\"week4\" element={<Week4 />} />\r\n          <Route path=\"week5\" element={<Week5 />} />\r\n          <Route path=\"week6\" element={<Week6 />} />\r\n          <Route path=\"week7\" element={<Week7 />} />\r\n          <Route path=\"products\" element={<Products cart={[]} setCart={() => {}} />} />\r\n          <Route path=\"products/:id\" element={<ProductDetail />} />\r\n          <Route path=\"cart\" element={<Cart />} />\r\n          <Route path=\"admin\" element={<Admin />} />\r\n        </Route>\r\n      </Routes>\r\n    </HashRouter>\r\n    // </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default RouteConf;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport './index.css';\nimport RouteConf from './RouteConf';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <RouteConf/>\n    </Provider>\n  </React.StrictMode>,\n);\n"],"names":["initialState","toastSlice","createSlice","state","action","showToast","hideToast","toastReducer","cartSlice","product","quantity","existingItem","item","itemId","id","addToCart","removeFromCart","updateCartItemQuantity","clearCart","cartReducer","store","configureStore","Toast","message","visible","useSelector","dispatch","useDispatch","useEffect","timer","toastHeaderClassName","jsx","jsxs","Layout","Fragment","Link","Outlet","Home","Week2","tempProduct","setTempProduct","React","productList","setProducts","isAuth","setIsAuth","useState","account","setAccount","handleInputChange","e","value","name","handleLogin","axios","res","token","expired","error","image","index","Week3","BASE_URL","API_PATH","defaultModalState","modalMode","setModalMode","getProducts","checkUserLogin","productModalRef","useRef","delProductModalRef","Modal","openProductModal","mode","modalInstance","openDelProductModal","closeProductModal","closeDelProductModal","handleModalInputChange","type","checked","prevProduct","handleModalImageChange","newImagesUrl","handleAddImageClick","handleCancelImageClick","createProduct","_b","_a","updateProduct","handleUploadProduct","result","delProduct","handleDelProduct","url","Login","prev","onSubmitLogin","ProductModal","forceUpdate","handleFileChange","file","formData","uploadImageUrl","n","handleAdditionalFileChange","Pagination","pageInfo","handlePageChange","total_pages","current_page","has_pre","has_next","_","DeleteProductModal","Product","setPageInfo","useCallback","page","apiCall","Week4","username","password","Week5","products","cart","setCart","loading","setLoading","register","handleSubmit","errors","useForm","openModal","closeModal","handleSeeMore","handleAddToCart","onSubmit","data","qtySelect","setQtySelect","ReactLoading","cartItem","acc","_c","_d","Navbar","onLogout","handleLogout","NavLink","isActive","Week6","handleAddToCartFromModal","Products","handleDeleteFromCart","cartItemId","ProductDetail","useParams","navigate","useNavigate","setProduct","Cart","totalAmount","handleDeleteItem","handleRemoveOne","newQty","handleAddOne","Admin","RouteConf","HashRouter","Routes","Route","Week7","ReactDOM","Provider"],"mappings":"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"}